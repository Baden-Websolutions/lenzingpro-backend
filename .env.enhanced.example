# ============================================================================
# SERVER CONFIGURATION
# ============================================================================
PORT=3002
NODE_ENV=production

# ============================================================================
# SAP COMMERCE CLOUD (OCC)
# ============================================================================
COMMERCE_BASE_URL=https://your-commerce-instance.com
COMMERCE_BASE_SITE=lenzingpro
COMMERCE_CLIENT_ID=your_commerce_client_id
COMMERCE_CLIENT_SECRET=your_commerce_client_secret

# ============================================================================
# CDC (GIGYA) OIDC CONFIGURATION
# ============================================================================
CDC_BASE=https://fidm.eu1.gigya.com
CDC_API_KEY=4_XQnjjmLc16oS7vqA6DvIAg
CDC_OIDC_CLIENT_ID=ABbd672Koy3U

# CDC Secret Key (Base64-encoded)
# CRITICAL: Required for Gigya SDK signature validation
# Get this from Gigya Console > Site Settings > API Key
# Without this, signature validation will be DISABLED (security risk!)
CDC_SECRET_KEY=your_base64_encoded_secret_key_here

# ============================================================================
# FRONTEND & CALLBACK CONFIGURATION
# ============================================================================
FRONTEND_BASE_URL=https://mtna-lp.dev
OIDC_CALLBACK_PATH=/oidc/callback
OIDC_REDIRECT_URI=https://api.mtna-lp.dev/occ

# ============================================================================
# CORS CONFIGURATION
# ============================================================================

# Allowed Origins (comma-separated)
# Supports:
# - Exact origins: https://example.com
# - Wildcard subdomains: *.example.com (matches app.example.com, api.example.com, etc.)
# - Multiple origins: https://example.com,*.example.com,https://other.com
#
# Examples:
# Single origin:
#   CORS_ALLOW_ORIGINS=https://mtna-lp.dev
#
# Multiple exact origins:
#   CORS_ALLOW_ORIGINS=https://mtna-lp.dev,https://www.mtna-lp.dev
#
# Wildcard subdomain:
#   CORS_ALLOW_ORIGINS=*.mtna-lp.dev
#
# Mixed (recommended for production):
#   CORS_ALLOW_ORIGINS=https://mtna-lp.dev,https://www.mtna-lp.dev,*.mtna-lp.dev
#
CORS_ALLOW_ORIGINS=https://mtna-lp.dev,https://www.mtna-lp.dev

# Allow credentials (cookies, authorization headers)
# Required for authentication flows
CORS_ALLOW_CREDENTIALS=true

# ============================================================================
# RATE LIMITING
# ============================================================================

# Maximum requests per time window
RATE_LIMIT_MAX=300

# Time window in milliseconds (60000 = 1 minute)
RATE_LIMIT_TIME_WINDOW_MS=60000

# ============================================================================
# COOKIE CONFIGURATION
# ============================================================================

# Cookie Secret (MUST be changed in production!)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
COOKIE_SECRET=your-random-secret-here-at-least-32-characters-long

# Cookie security settings
COOKIE_SECURE=true          # Only send over HTTPS (set to false for local development)
COOKIE_HTTP_ONLY=true       # Prevent JavaScript access (XSS protection)
COOKIE_SAME_SITE=lax        # CSRF protection (strict|lax|none)
COOKIE_MAX_AGE=86400        # Cookie lifetime in seconds (86400 = 24 hours)

# ============================================================================
# SECURITY HEADERS
# ============================================================================

# Enable HTTP Strict Transport Security (HSTS)
ENABLE_HSTS=true
HSTS_MAX_AGE=31536000       # 1 year in seconds

# Enable Content Security Policy (CSP)
ENABLE_CSP=true

# ============================================================================
# LOGGING
# ============================================================================

# Log level (fatal|error|warn|info|debug|trace)
LOG_LEVEL=info

# Log CORS violations for monitoring
LOG_CORS_VIOLATIONS=true

# ============================================================================
# GIGYA SDK CONFIGURATION
# ============================================================================

# Signature expiration time in seconds
# How long a Gigya signature is considered valid
GIGYA_SIGNATURE_EXPIRATION=300  # 5 minutes

# API timeout in milliseconds
# Maximum time to wait for Gigya API responses
GIGYA_API_TIMEOUT=10000         # 10 seconds

# ============================================================================
# DEVELOPMENT SETTINGS (remove in production)
# ============================================================================

# For local development only:
# NODE_ENV=development
# COOKIE_SECURE=false
# CORS_ALLOW_ORIGINS=http://localhost:3000,http://localhost:5173
# LOG_LEVEL=debug
